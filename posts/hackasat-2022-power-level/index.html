<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=author content><meta name=description content><meta name=keywords content><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><meta name=generator content="Hugo 0.99.1"><link rel=canonical href=https://starfleetcadet75.github.io/posts/hackasat-2022-power-level/><meta property="og:title" content="Hack-A-Sat 2022: Power Level"><meta property="og:description" content="What does the scouter say about their power level?"><meta property="og:type" content="article"><meta property="og:url" content="https://starfleetcadet75.github.io/posts/hackasat-2022-power-level/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-22T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hack-A-Sat 2022: Power Level"><meta name=twitter:description content="What does the scouter say about their power level?"><meta itemprop=name content="Hack-A-Sat 2022: Power Level"><meta itemprop=description content="What does the scouter say about their power level?"><meta itemprop=datePublished content="2022-05-22T00:00:00+00:00"><meta itemprop=dateModified content="2022-05-22T00:00:00+00:00"><meta itemprop=wordCount content="450"><meta itemprop=keywords content="signals,matlab,"><link rel=stylesheet href=/css/layout.css><link rel=stylesheet href=/css/default-dark.css><link rel=stylesheet href=/css/adoc-html5-extension.css><title>Hack-A-Sat 2022: Power Level</title></head><body><div class=main><header><div class=header-bar><nav><div class=siteTitle><a href=https://starfleetcadet75.github.io/>starfleetcadet75</a></div><a class=nav-item href=/about/><div class=nav-item-title>About</div></a><a class=nav-item href=/readinglist/><div class=nav-item-title>Reading List</div></a><a class="nav-item active" href=/posts/><div class=nav-item-title>Posts</div></a></nav><div class=social-links-header style=visibility:hidden;display:none><a href=mailto:starfleetcadet75@gmail.com><div class=social-link>email</div></a><a href=https://github.com/starfleetcadet75 target=_blank><div class=social-link>gh</div></a><a href=https://gitlab.com/starfleetcadet75 target=_blank><div class=social-link>gl</div></a></div></div></header><article class=post><h1 class=title>Hack-A-Sat 2022: Power Level</h1><div class=content><p><strong>Category:</strong> Signal Processing<br><strong>Points:</strong> 104</p><h2 id=challenge>Challenge</h2><blockquote><p>&ldquo;What does the scouter say about their power level?&rdquo;<br>Waitâ€¦ you got angry and crushed your scouter. Go make a new one.</p><p>Connect to the challenge on:
<code>power_level.satellitesabove.me:5100</code></p></blockquote><h2 id=observations>Observations</h2><p>Connecting to the challenge server starts up a separate service that streams the data for a signal over TCP.</p><pre tabindex=0><code class=language-none data-lang=none>$ nc power_level.satellitesabove.me 5100
Samples available at: 3.230.2.251 18878
Connect via TCP to get the samples at 3.230.2.251:18878
The sample rate is 100000.0
Waiting for client connection
What is the frequency of the signal? (Hz)
</code></pre><p>We can record the signal to a file by connecting to it.</p><pre tabindex=0><code class=language-none data-lang=none>nc 3.230.2.251 18878 &gt; power_level.dat
</code></pre><p>The server says that the sample rate is 100000 Hz and that it is providing us with 100000 samples.
The size of the resulting file is 800000 bytes, which indicates that the data is stored as 8 bytes per sample.</p><p>The first prompt asks us to determine the frequency of the signal in hertz.
This can be determined by importing the data into Matlab and using a <a href=https://www.mathworks.com/help/signal/ref/periodogram.html>periodogram</a>.</p><h2 id=solution>Solution</h2><p>First we import the recorded signal as an array of single-precision floats.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>fid = fopen(&#34;powerlevel.dat&#34;, &#34;r&#34;);
</span></span><span style=display:flex><span>data = fread(fid, &#34;single&#34;);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fs = <span style=color:#ae81ff>100e3</span>;
</span></span><span style=display:flex><span>n = <span style=color:#ae81ff>100e3</span>;
</span></span><span style=display:flex><span>fprintf(&#34;Sample Rate = <span style=color:#75715e>%d (Hz)&#34;, fs);</span>
</span></span><span style=display:flex><span>fprintf(&#34;Sample Size = <span style=color:#75715e>%d&#34;, n);</span>
</span></span></code></pre></div><p>The signal is stored as interleaved I/Q data, so we must extract both parts into separate in-phase and quadrature arrays.
We can then plot what the I/Q data looks like.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>sig_I = data(<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>2</span>:<span style=color:#66d9ef>end</span>);
</span></span><span style=display:flex><span>sig_Q = data(<span style=color:#ae81ff>2</span>:<span style=color:#ae81ff>2</span>:<span style=color:#66d9ef>end</span>);
</span></span><span style=display:flex><span>IQ_data = sig_I <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>j <span style=color:#f92672>*</span> sig_Q;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>figure(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>plot(real(IQ_data(<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>1000</span>)), &#34;b&#34;);
</span></span><span style=display:flex><span>hold on;
</span></span><span style=display:flex><span>plot(imag(IQ_data(<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>1000</span>)), &#34;g&#34;);
</span></span><span style=display:flex><span>legend(&#34;Inphase Signal&#34;, &#34;Quadrature Signal&#34;);
</span></span><span style=display:flex><span>title(&#34;IQ Data <span style=color:#66d9ef>for</span> First <span style=color:#ae81ff>1000</span> Points of Acquired Signal&#34;);
</span></span><span style=display:flex><span>xlabel(&#34;Sample Number&#34;);
</span></span><span style=display:flex><span>ylabel(&#34;Voltage&#34;);
</span></span></code></pre></div><p><img src=https://raw.githubusercontent.com/starfleetcadet75/writeups/master/2022-Hack-A-Sat/power-level/iq_data.png alt=iq_data></p><p>Now that we have the I/Q data, we can use a periodogram to determine the frequency of the signal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#75715e>% Create a periodogram spectrum with a Hamming window to visualize the max frequency</span>
</span></span><span style=display:flex><span>figure(<span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>w = hamming(length(IQ_data));
</span></span><span style=display:flex><span>periodogram(IQ_data, w, [], fs, &#34;centered&#34;);
</span></span></code></pre></div><p>We can clearly see one frequency peaking at 3.125 kHz in the plot.</p><p><img src=https://raw.githubusercontent.com/starfleetcadet75/writeups/master/2022-Hack-A-Sat/power-level/fft.png alt=fft></p><p>We can also just get the actual max frequency programmatically.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span><span style=color:#75715e>% Actually determine the max frequency using the periodogram</span>
</span></span><span style=display:flex><span>[pxx, F] = periodogram(IQ_data, w, [], fs, &#34;power&#34;);
</span></span><span style=display:flex><span>[pwrest, idx] = max(pxx);
</span></span><span style=display:flex><span>fprintf(&#34;Frequency = <span style=color:#75715e>%3.1f (Hz)\n&#34;, F(idx));</span>
</span></span></code></pre></div><p>This will output &ldquo;Frequency = 3125.0 (Hz)&rdquo;, which is the first solution.</p><p>The challenge then asks us to determine the signal-to-noise ratio (SNR) of the sampled signal.
We can easily do this in Matlab using the <a href=https://www.mathworks.com/help/signal/ref/snr.html>snr</a> function with the real part of the complex I/Q vector.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-matlab data-lang=matlab><span style=display:flex><span>SNR = snr(real(IQ_data), fs);
</span></span><span style=display:flex><span>fprintf(&#34;SNR = <span style=color:#75715e>%3.2f (dB)\n&#34;, SNR);</span>
</span></span></code></pre></div><p>The reported SNR value is 32.11 dB, although the challenge will accept a range of values that are within a close enough margin of error.</p><p><img src=https://raw.githubusercontent.com/starfleetcadet75/writeups/master/2022-Hack-A-Sat/power-level/flag.png alt=flag></p></div><footer class=post-footer><div class=post-footer-data><div class=tags><div class=tag><a href=/tags/signals>#signals</a></div><div class=tag><a href=/tags/matlab>#matlab</a></div></div><div class=post-footer-meta>Permalink: <a href=https://starfleetcadet75.github.io/posts/hackasat-2022-power-level/>/posts/hackasat-2022-power-level/</a> | Date: 2022-05-22</div><hr><div class=categories>Published in:<div class=category><a href=/categories/writeups>writeups</a></div></div><div class=series></div></div></footer></article><footer><div class=social-links-footer><a href=mailto:starfleetcadet75@gmail.com><div class=social-link>Email</div></a><a href=https://github.com/starfleetcadet75 target=_blank><div class=social-link>GitHub</div></a><a href=https://gitlab.com/starfleetcadet75 target=_blank><div class=social-link>GitLab</div></a><div class=social-link><a href=https://starfleetcadet75.github.io/index.xml target=_blank>RSS</a></div></div><div class=copyright></div><div class=poweredby>Powered by <a href=https://gohugo.io/>Hugo</a>.</div></footer></div></body></html>